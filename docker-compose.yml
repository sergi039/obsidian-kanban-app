version: '3.8'

services:
  kanban:
    build: .
    ports:
      - '4000:4000'
    volumes:
      # Mount Obsidian vault (read-write for bidirectional sync)
      - ${VAULT_PATH:?Set VAULT_PATH to your Obsidian vault directory}:/vault
      # Persist SQLite database
      - kanban-data:/app/data
      # Config
      - ./config.boards.json:/app/config.boards.json:ro
    environment:
      PORT: '4000'
      VAULT_ROOT: /vault
      # Set a secure token for API authentication (required for production)
      API_TOKEN: ${API_TOKEN:-}
    restart: unless-stopped

volumes:
  kanban-data:
